<!-- 1. Сначала стили -->
<link rel="stylesheet" href="cdnjs.cloudflare.com">

<!-- 2. Скрипт библиотеки с триггером инициализации -->
<script src="cdnjs.cloudflare.com" onload="initLightbox()"></script>

<script>
  function initLightbox() {
    // Эта функция сработает только когда библиотека точно загружена
    var images = document.querySelectorAll('.post-content a[href$=".jpg"], .post-content a[href$=".png"], .post-content a[href$=".webp"], .photo-grid a');
    
    if (images.length > 0) {
      images.forEach(function(el) {
        new Luminous(el, {
          closeOnScroll: true,
          closeTrigger: 'click', // Закрытие по клику в любую область
          appendToNode: document.body // Гарантирует правильное наложение слоев
        });
      });
    }
  }
</script>

<style>
  /* Стили для удобства закрытия */
  .lum-lightbox {
    z-index: 10000;
    cursor: pointer; /* Показывает, что клик в пустоту закроет фото */
  }
  .lum-lightbox-inner {
    cursor: default;
  }
  .lum-lightbox-background {
    background: rgba(0, 0, 0, 0.9) !important;
  }
  /* Фикс для мобильных (чтобы кнопки закрытия не перекрывались) */
  .lum-close-button {
    display: none; /* Часто она лишняя, если работает клик по фону */
  }
</style>
