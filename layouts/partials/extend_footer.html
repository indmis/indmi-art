<!-- Библиотека Luminous (Inline-версия для стабильности 2026) -->
<style>
/* Базовые стили Luminous */
@keyframes lum-fadein{0%{opacity:0}to{opacity:1}}@keyframes lum-fadeout{0%{opacity:1}to{opacity:0}}@keyframes lum-fadeYin{0%{opacity:0;transform:translateY(-40px)}to{opacity:1;transform:translateY(0)}}@keyframes lum-fadeYout{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.lum-lightbox{position:fixed;display:none;top:0;right:0;bottom:0;left:0;z-index:10000;cursor:zoom-out}.lum-lightbox.lum-open{display:block}.lum-lightbox-background{position:absolute;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.9);animation:lum-fadein .4s ease}.lum-lightbox-inner{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;animation:lum-fadeYin .4s ease}.lum-lightbox-inner img{max-width:90vw;max-height:90vh;box-shadow:0 0 30px rgba(0,0,0,.5);cursor:default}
</style>

<script>
/**
 * Мини-версия Luminous для вставки напрямую
 */
!function(){"use strict";function e(t,i){return this instanceof e?(this.el=t,this.options=i||{},void this._init()):new e(t,i)}e.prototype._init=function(){var e=this;this.el.addEventListener("click",function(t){t.preventDefault(),e.open()})},e.prototype.open=function(){var e=this,t=document.createElement("div");t.className="lum-lightbox",t.innerHTML='<div class="lum-lightbox-background"></div><div class="lum-lightbox-inner"><img src="'+this.el.getAttribute("href")+'"></div>',document.body.appendChild(t),t.classList.add("lum-open"),t.addEventListener("click",function(){t.classList.remove("lum-open"),setTimeout(function(){t.remove()},400)})},window.Luminous=e}();

/**
 * Инициализация
 */
document.addEventListener("DOMContentLoaded", function() {
    var images = document.querySelectorAll('.post-content a[href$=".jpg"], .post-content a[href$=".png"], .post-content a[href$=".webp"], .photo-grid a');
    if (window.Luminous) {
        images.forEach(function(el) {
            new Luminous(el);
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const pool = document.querySelectorAll('#projects-pool .p-item');
    const display = document.getElementById('glitch-display');
    
    if (pool.length > 0 && display) {
        // 1. Превращаем список в массив и перемешиваем его
        let shuffled = Array.from(pool).sort(() => 0.5 - Math.random());
        
        // 2. Берем первые 3 проекта
        shuffled.slice(0, 3).forEach(project => {
            const card = document.createElement('div');
            card.className = 'glitch-card';
            
            // Собираем HTML карточки
            card.innerHTML = `
                <a href="${project.dataset.url}">
                    <div class="glitch-img-wrap">
                        <img src="${project.dataset.img}" alt="${project.dataset.title}">
                    </div>
                    <h3>${project.dataset.title}</h3>
                </a>
            `;
            display.appendChild(card);
        });
    }
});
</script>
